<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <!-- comment this script out to not use the data layer visitor and fall back to the default set in GTM -->
    <script>
        visitorVariable = 'gtmVisitorPerson';
        javascriptVisitor = 'gtmJsVar';
        //someOtherValue = 'jigglypuff';
    </script>
    <script>
        // this delays the visitor being available.
        // the event sent below is configured in GTM to be the trigger for the Pendo script to load
        function setVariable() {
            window.dataLayer = window.dataLayer || [];
            dataLayer.push({
                'visitorId': visitorVariable,
                'javascriptVisitor': javascriptVisitor,
                'event': 'variablesSet'
            });
            
            console.log("variables set and pushed")
        }
        setTimeout(setVariable, 3000);
    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
    </script>
    <!--     <script>
        if (window.sessionStorage.getItem('javascriptVisitor') == null) {
            window.sessionStorage.setItem('javascriptVisitor', 'sessionStorageVisitorVar');
            console.log('javascriptVisitor');
        } else {
            console.log("it's not null");
            console.log(window.sessionStorage.getItem('javascriptVisitor'));
        };
    </script> -->
    <!-- this is the gtm tag default out of the box -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WKHRP5F');
    </script>

    <title>GTM with Data Layer Vars</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <link rel="shortcut icon" type="image/jpg" href="engram.ico" />
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WKHRP5F" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="header">
        <h1>Hello</h1>
        <p>I am a website</p>
        <p>I use Google Tag Manager</p>
    </div>

    <!--Navigation bar-->
    <div id="nav-placeholder">

    </div>

    <script>
        $(function () {
            $("#nav-placeholder").load("navbar.html");
        });
    </script>
    <!--end of Navigation bar-->

    <div class="row">
        <div class="side">
            <h2>Stuff</h2>
            <img src="img/rainbowEmblem.png" width="300"><br>
            <img src="img/catEmblem.png" width="300"><br>
            <img src="img/heartEmblem.png" width="300"><br>
            <p>Lorem ipsum nightstalker fatebringer.</p>

        </div>
        <div class="main">
            <div>
                <button onclick="dummyClick()" class="btn arc" id="dummyClick"
                    style='padding: 0px 10px; ;border: solid 1px black; height: 40px;vertical-align: middle;'>Click me
                    for a dummy event!</button>

                <script type="text/javascript">
                    function dummyClick() {
                        console.log("yeah, it's clicked");
                    }
                </script>
            </div>
            <div>
                <button onclick="getVisitorId()" class="btn arc" id="getVisitorId"
                    style='padding: 0px 10px; ;border: solid 1px black; height: 40px;vertical-align: middle;'>getVisitorId</button>

                <p id="getVisitorIdOutput"></p>

                <script type="text/javascript">
                    function getVisitorId() {
                        document.getElementById("getVisitorIdOutput").innerHTML = pendo.getVisitorId()
                    }
                </script>
            </div>
            <div>
                <button onclick="checkSessionStorageVisitor()" class="btn arc" id="getSessionStorageVisitor"
                    style='padding: 0px 10px; ;border: solid 1px black; height: 40px;vertical-align: middle;'>getSessionStorageVisitor</button>

                <p id="getSessionStorageVisitorOutput"></p>

                <script type="text/javascript">
                    function checkSessionStorageVisitor() {
                        document.getElementById("getSessionStorageVisitorOutput").innerHTML = window.sessionStorage.getItem('javascriptVisitor')
                    }
                </script>
            </div>
        </div>
    </div>
    <div class="footer">
        <h2>I want to go to there</h2>
        <a href="https://www.bungie.com">Bungo</a> |
        <a href="https://www.d2checklist.com">D2 Checklist</a> |
        <a href="https://www.destinyitemmanager.com">DIM</a>
    </div>


</body>

</html>